[["data-transformation.html", "Chapter 3 Data transformation 3.1 Step1: Change column names 3.2 Step2: Merge Three DataFrames 3.3 Step3: Change Data Types 3.4 Step4: Tidying data with pivot_longer", " Chapter 3 Data transformation 3.1 Step1: Change column names The column names in the original dataset are too long and contain white spaces, which is inconvenient for future development. Moreover, all the column names are the same for student, teacher and parent dataset, thus we cannot discriminate among them after merging these three dataframes in Step2. Therefore, for the first step, we change each long column name to a shorter yet clear name, with prefix “s_”,“t_”, and “p_” for student, teacher and parent respectively. The column names of students response result after transformation is: ## [1] &quot;DBN&quot; &quot;name&quot; &quot;parent_rr&quot; ## [4] &quot;teacher_rr&quot; &quot;student_rr&quot; &quot;s_collab_teachers&quot; ## [7] &quot;s_effective_schlead&quot; &quot;s_rig_instruction&quot; &quot;s_supp_env&quot; ## [10] &quot;s_family_communityties&quot; &quot;s_trust&quot; The column names of teacher response result after transformation is: ## [1] &quot;DBN&quot; &quot;name&quot; &quot;parent_rr&quot; ## [4] &quot;teacher_rr&quot; &quot;student_rr&quot; &quot;t_collab_teachers&quot; ## [7] &quot;t_effective_schlead&quot; &quot;t_rig_instruction&quot; &quot;t_supp_env&quot; ## [10] &quot;t_family_communityties&quot; &quot;t_trust&quot; The column names of parent response result after transformation is: ## [1] &quot;DBN&quot; &quot;name&quot; &quot;parent_rr&quot; ## [4] &quot;teacher_rr&quot; &quot;student_rr&quot; &quot;p_collab_teachers&quot; ## [7] &quot;p_effective_schlead&quot; &quot;p_rig_instruction&quot; &quot;p_supp_env&quot; ## [10] &quot;p_family_communityties&quot; &quot;p_trust&quot; 3.2 Step2: Merge Three DataFrames From the result in Chapter 2 we know that parent, student and teacher response datasets do not have the same row numbers, suggesting that some schools in one dataset may not exist in other datasets. ## dim of student is: 1831 11 ## dim of parent is: 2946 11 ## dim of teacher is: 1903 11 In order to be consistent, we firstly merge the three datasets and only keep those schools who exist in all of these three datasets. Moreover, the parent/teacher/student response rate should be the same in those three datasets, therefore we merge the three datasets by [“DBN”,“name”,“parent_rr”,“student_rr”,“teacher_rr”]. A summary of the merged dataset is shown as below: ## &#39;data.frame&#39;: 1829 obs. of 23 variables: ## $ DBN : chr &quot;01M015&quot; &quot;01M019&quot; &quot;01M020&quot; &quot;01M034&quot; ... ## $ name : chr &quot;P.S. 015 ROBERTO CLEMENTE&quot; &quot;P.S. 019 ASHER LEVY&quot; &quot;P.S. 020 ANNA SILVER&quot; &quot;P.S. 034 FRANKLIN D. ROOSEVELT&quot; ... ## $ parent_rr : num 91 100 58 29 80 52 79 46 57 100 ... ## $ teacher_rr : num 100 93 90 100 100 96 77 93 89 100 ... ## $ student_rr : chr &quot;N/A&quot; &quot;N/A&quot; &quot;N/A&quot; &quot;95&quot; ... ## $ s_collab_teachers : chr &quot;4.0999999999999996&quot; &quot;4.53&quot; &quot;2.71&quot; &quot;2.69&quot; ... ## $ s_effective_schlead : chr &quot;4.1900000000000004&quot; &quot;4.51&quot; &quot;2.98&quot; &quot;2.59&quot; ... ## $ s_rig_instruction : chr &quot;4.0199999999999996&quot; &quot;4.8&quot; &quot;1.92&quot; &quot;2.14&quot; ... ## $ s_supp_env : chr &quot;N/A&quot; &quot;N/A&quot; &quot;N/A&quot; &quot;N/A&quot; ... ## $ s_family_communityties: chr &quot;4.18&quot; &quot;4.66&quot; &quot;3.84&quot; &quot;3.67&quot; ... ## $ s_trust : chr &quot;3.96&quot; &quot;3.76&quot; &quot;3.14&quot; &quot;2.38&quot; ... ## $ t_collab_teachers : chr &quot;4.0999999999999996&quot; &quot;4.53&quot; &quot;2.71&quot; &quot;2.69&quot; ... ## $ t_effective_schlead : chr &quot;4.1900000000000004&quot; &quot;4.51&quot; &quot;2.98&quot; &quot;2.59&quot; ... ## $ t_rig_instruction : chr &quot;4.0199999999999996&quot; &quot;4.8&quot; &quot;1.92&quot; &quot;2.14&quot; ... ## $ t_supp_env : chr &quot;N/A&quot; &quot;N/A&quot; &quot;N/A&quot; &quot;N/A&quot; ... ## $ t_family_communityties: chr &quot;4.18&quot; &quot;4.66&quot; &quot;3.84&quot; &quot;3.67&quot; ... ## $ t_trust : chr &quot;3.96&quot; &quot;3.76&quot; &quot;3.14&quot; &quot;2.38&quot; ... ## $ p_collab_teachers : chr &quot;4.0999999999999996&quot; &quot;4.53&quot; &quot;2.71&quot; &quot;2.69&quot; ... ## $ p_effective_schlead : chr &quot;4.1900000000000004&quot; &quot;4.51&quot; &quot;2.98&quot; &quot;2.59&quot; ... ## $ p_rig_instruction : chr &quot;4.0199999999999996&quot; &quot;4.8&quot; &quot;1.92&quot; &quot;2.14&quot; ... ## $ p_supp_env : chr &quot;N/A&quot; &quot;N/A&quot; &quot;N/A&quot; &quot;N/A&quot; ... ## $ p_family_communityties: chr &quot;4.18&quot; &quot;4.66&quot; &quot;3.84&quot; &quot;3.67&quot; ... ## $ p_trust : chr &quot;3.96&quot; &quot;3.76&quot; &quot;3.14&quot; &quot;2.38&quot; ... 3.3 Step3: Change Data Types After step2, we have a integrated dataset that combines data from student, teacher and parent datasets. However, the data types of many columns are incorrect – instead of character, they should be float. Therefore, we convert the data type of those columns to numeric. The summary of data after transformation is shown as below: ## &#39;data.frame&#39;: 1829 obs. of 23 variables: ## $ DBN : chr &quot;01M015&quot; &quot;01M019&quot; &quot;01M020&quot; &quot;01M034&quot; ... ## $ name : chr &quot;P.S. 015 ROBERTO CLEMENTE&quot; &quot;P.S. 019 ASHER LEVY&quot; &quot;P.S. 020 ANNA SILVER&quot; &quot;P.S. 034 FRANKLIN D. ROOSEVELT&quot; ... ## $ parent_rr : num 91 100 58 29 80 52 79 46 57 100 ... ## $ teacher_rr : num 100 93 90 100 100 96 77 93 89 100 ... ## $ student_rr : num NA NA NA 95 NA NA NA NA 87 NA ... ## $ s_collab_teachers : num 4.1 4.53 2.71 2.69 NA 4.56 3.11 2.51 3.44 3.55 ... ## $ s_effective_schlead : num 4.19 4.51 2.98 2.59 NA 4.09 3.15 1.53 4.21 3.73 ... ## $ s_rig_instruction : num 4.02 4.8 1.92 2.14 NA 3.74 1.96 3.19 3.4 3.23 ... ## $ s_supp_env : num NA NA NA NA NA NA NA NA NA NA ... ## $ s_family_communityties: num 4.18 4.66 3.84 3.67 NA 4.18 3.67 3.38 3.59 4.01 ... ## $ s_trust : num 3.96 3.76 3.14 2.38 3.77 4.04 3.29 2.55 3.7 3.12 ... ## $ t_collab_teachers : num 4.1 4.53 2.71 2.69 NA 4.56 3.11 2.51 3.44 3.55 ... ## $ t_effective_schlead : num 4.19 4.51 2.98 2.59 NA 4.09 3.15 1.53 4.21 3.73 ... ## $ t_rig_instruction : num 4.02 4.8 1.92 2.14 NA 3.74 1.96 3.19 3.4 3.23 ... ## $ t_supp_env : num NA NA NA NA NA NA NA NA NA NA ... ## $ t_family_communityties: num 4.18 4.66 3.84 3.67 NA 4.18 3.67 3.38 3.59 4.01 ... ## $ t_trust : num 3.96 3.76 3.14 2.38 3.77 4.04 3.29 2.55 3.7 3.12 ... ## $ p_collab_teachers : num 4.1 4.53 2.71 2.69 NA 4.56 3.11 2.51 3.44 3.55 ... ## $ p_effective_schlead : num 4.19 4.51 2.98 2.59 NA 4.09 3.15 1.53 4.21 3.73 ... ## $ p_rig_instruction : num 4.02 4.8 1.92 2.14 NA 3.74 1.96 3.19 3.4 3.23 ... ## $ p_supp_env : num NA NA NA NA NA NA NA NA NA NA ... ## $ p_family_communityties: num 4.18 4.66 3.84 3.67 NA 4.18 3.67 3.38 3.59 4.01 ... ## $ p_trust : num 3.96 3.76 3.14 2.38 3.77 4.04 3.29 2.55 3.7 3.12 ... 3.4 Step4: Tidying data with pivot_longer Now we have an integrated dataset with correct data types. However, the dataset is still “messy”. In order to perform the future data visualization more conveniently, we need to change the “messy data” to “tidy data” with pivot_longer. A summary of the tidy data is shown as below, with variable aspect denotes the certain aspect of the school education evaluated by students, parents and teachers. The variable score denotes the score of a certain aspect. ## tibble [32,922 x 7] (S3: tbl_df/tbl/data.frame) ## $ DBN : chr [1:32922] &quot;01M015&quot; &quot;01M015&quot; &quot;01M015&quot; &quot;01M015&quot; ... ## $ name : chr [1:32922] &quot;P.S. 015 ROBERTO CLEMENTE&quot; &quot;P.S. 015 ROBERTO CLEMENTE&quot; &quot;P.S. 015 ROBERTO CLEMENTE&quot; &quot;P.S. 015 ROBERTO CLEMENTE&quot; ... ## $ parent_rr : num [1:32922] 91 91 91 91 91 91 91 91 91 91 ... ## $ teacher_rr: num [1:32922] 100 100 100 100 100 100 100 100 100 100 ... ## $ student_rr: num [1:32922] NA NA NA NA NA NA NA NA NA NA ... ## $ aspect : chr [1:32922] &quot;s_collab_teachers&quot; &quot;s_effective_schlead&quot; &quot;s_rig_instruction&quot; &quot;s_supp_env&quot; ... ## $ score : num [1:32922] 4.1 4.19 4.02 NA 4.18 3.96 4.1 4.19 4.02 NA ... "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
